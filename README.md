OpenWeather SDK:

Описание:
Это Java SDK для интеграции с OpenWeatherMap API. Оно позволяет получать текущую погоду по названию города, кэширует данные для оптимизации (до 10 городов, актуальность 10 минут), поддерживает два режима работы: on-demand (обновление по запросу) и polling (автоматическое обновление для нулевой задержки). SDK выбрасывает исключения при ошибках и обеспечивает уникальность экземпляров по API key.

Функции:
Получение погоды по городу с возвратом JSON в заданной структуре.
Кэширование с LRU (ограничено 10 городами).
Режимы: ON_DEPEND (обновление по запросу) и POLLING (автообновление каждые N секунд).
Уникальность экземпляров по API key (через фабрику SdkFactory).
Исключения: WeatherException при ошибках API, сети или валидации.
Температура возвращается в Цельсиях (Celsius), ветер в м/с, видимость в метрах.
Требования
Java 11 или выше.
Maven 3.6+ (для сборки).
API key от OpenWeatherMap (получите бесплатно на openweathermap.org).
Установка
Клонируйте репозиторий или скачайте исходный код.
Соберите проект с помощью Maven:


mvn clean install
Добавьте JAR-файл (target/openweather-sdk-1.0.0.jar) в classpath вашего Java-проекта.
Использование
Инициализация SDK
Используйте SdkFactory для создания экземпляра (гарантирует уникальность по key и предотвращает дубликаты).



API Методы
String getWeatherByCity(String city): Получает погоду по названию города. Возвращает JSON-строку (см. структуру ниже). Проверяет кэш; если данные устарели (>10 мин) или отсутствуют, делает запрос к API.
void delete(): Удаляет экземпляр, останавливает polling и очищает кэш.
Структура возвращаемого JSON
SDK возвращает данные в следующем формате (температура в Цельсиях):


Исключения
WeatherException: Выбрасывается при ошибках (невалидный город, API-ошибка, сеть, прерывание).
Примеры: "City required", "API error: HTTP 401: Invalid API key", "I/O error when calling API".
Примеры
См. папку examples/ в репозитории:

OnDemandExample.java: Пример использования в режиме on-demand.
PollingExample.java: Пример с polling.
ErrorHandlingExample.java: Обработка ошибок.
Запустите примеры после сборки:


mvn exec:java -Dexec.mainClass="examples.OnDemandExample"
Тестирование
Запустите unit-тесты:



mvn test
Тесты покрывают кэширование, API-вызовы, исключения и фабрику. Для интеграционных тестов используйте реальный API key (с осторожностью, чтобы не превысить лимиты).


Кэширование: LRU с 10 городами; данные актуальны 10 минут.
Polling: В режиме POLLING SDK автоматически обновляет кэш для всех городов.
Безопасность: API key хранится приватно; не логируйте его.
Ограничения: OpenWeatherMap имеет лимиты (1000 запросов/день для бесплатного плана).
